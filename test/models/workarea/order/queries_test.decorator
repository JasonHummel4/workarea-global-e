module Workarea
  decorate Order::QueriesTest, with: :global_e do
    def test_find_current_pending_global_e
      order = create_global_e_completed_checkout

      result = Order.find_current(id: order.id, user_id: 'foo')

      assert_kind_of(Order, result)
      refute_equal(result, order)
      assert_equal('foo', result.user_id)
    end
  end
end
